<?php

echo "<div class=\"easyui-layout\" style=\"width:100%;height:100%;\">\n    <div data-options=\"region:'north',border:false\" style=\"height:180px;padding: 10px\">\n        <div class=\"easyui-layout\" style=\"width:100%;height:100%;\">\n            <div data-options=\"region:'west',border:false\" style=\"width:20%;padding: 10px;overflow: hidden;\">\n                <div class=\"form-control\">\n                    <input id=\"nomor\" disabled class=\"easyui-textbox\" label=\"No PKB:\" labelWidth=\"100px\"\n                           style=\"width:230px\">\n                </div>\n                <div class=\"form-control\">\n                    <input id=\"waktu_daftar\" disabled class=\"easyui-datebox\" label=\"Tgl Transaksi:\" labelWidth=\"100px\"\n                           style=\"width:220px\" value=\"";
echo date("Y-m-d");
echo "\">\n                </div>\n                <div class=\"form-control\">\n                    <input id=\"no_antrian\" disabled class=\"easyui-textbox\" label=\"No Antrian:\" labelWidth=\"100px\"\n                           style=\"width:150px\">\n                </div>\n                <div class=\"form-control\">\n                    ";
echo yii\helpers\Html::dropDownList("perintah_kerja_alasan_id", NULL, yii\helpers\ArrayHelper::map(app\models\PerintahKerjaAlasan::find()->all(), "id", "nama"), array("class" => "easyui-combobox", "id" => "perintah_kerja_alasan_id", "label" => "Alasan ke Ahass:", "labelWidth" => "100px", "style" => "width:220px", "disabled" => true));
echo "                </div>\n            </div>\n            <div data-options=\"region:'center',border:false\" style=\"padding: 10px;overflow: hidden\">\n                <div class=\"form-control\">\n                    ";
echo yii\helpers\Html::dropDownList("konsumen_id", NULL, array(), array("class" => "easyui-combobox", "id" => "konsumen_id", "label" => "Konsumen:", "labelWidth" => "100px", "style" => "width:200px", "disabled" => true));
echo "\n                    <button id=\"btn_search_konsumen\" disabled class=\"easyui-linkbutton\"\n                            data-options=\"iconCls:'icon-search'\"></button>\n\n                    ";
echo app\components\Utility::getKonsumenAddButton("#konsumen_id");
echo "                </div>\n\n                <div class=\"form-control\">\n                    <input id=\"konsumen_nama\" disabled class=\"easyui-textbox\" label=\"Nama:\" \n                        labelWidth=\"100px\" style=\"width:300px\">\n                </div>\n\n                <div class=\"form-control\">\n                    <input id=\"konsumen_no_telepon\" disabled class=\"easyui-textbox\" label=\"No Telp:\" \n                        labelWidth=\"100px\" style=\"width:300px\">\n                </div>\n\n                <div class=\"form-control\">\n                    <input id=\"konsumen_no_mesin\" disabled class=\"easyui-textbox\" label=\"No Mesin:\" \n                        labelWidth=\"100px\" style=\"width:300px\">\n                </div>\n\n                <div class=\"form-control\">\n                    ";
echo yii\helpers\Html::dropDownList("konsumen_motor_id", NULL, yii\helpers\ArrayHelper::map(app\models\Motor::find()->all(), "id", "namaLengkap"), array("class" => "easyui-combobox", "id" => "konsumen_motor_id", "label" => "Motor:", "labelWidth" => "100px", "style" => "width:300px", "disabled" => true));
echo "                </div>\n            </div>\n            <div data-options=\"region:'east',border:false\" style=\"width:50%;padding: 10px\">\n                <div class=\"form-control\">\n                    <input id=\"kondisi_awal\" disabled class=\"easyui-textbox\" label=\"Kondisi Awal:\" labelWidth=\"150px\"\n                           style=\"width:95%\">\n                </div>\n                <div class=\"form-control\">\n                    <input id=\"keluhan\" disabled class=\"easyui-textbox\" label=\"Keluhan Konsumen:\" labelWidth=\"150px\"\n                           style=\"width:95%\">\n                </div>\n                <div class=\"form-control\">\n                    <input id=\"analisa\" disabled class=\"easyui-textbox\" label=\"Analisa SA:\" labelWidth=\"150px\"\n                           style=\"width:95%\">\n                </div>\n                <div class=\"form-control\">\n                    <input id=\"km\" disabled class=\"easyui-textbox\" label=\"KM Service:\" labelWidth=\"150px\"\n                           style=\"width:200px;margin-right: 20px\">\n                    ";
echo yii\helpers\Html::dropDownList("bbm", NULL, array("0", "1", "2", "3", "4", "5", "6"), array("class" => "easyui-combobox", "id" => "bbm", "label" => "Status BBM:", "labelWidth" => "100px", "style" => "width:150px", "disabled" => true));
echo "                    Konfirmasi Konsumen : <input id=\"konfirmasi\" disabled type=\"checkbox\">\n                    <!--Terima Reminder : <input id=\"dari_sms\" disabled type=\"checkbox\">-->\n                </div>\n                <input id=\"catatan\" disabled class=\"easyui-textbox\" label=\"Catatan Mekanik:\" labelWidth=\"150px\"\n                       style=\"width:100%\">\n            </div>\n        </div>\n    </div>\n    <div data-options=\"region:'center',border:false\" style=\"height: 30%;padding: 10px\">\n        <table id=\"list_pekerjaan\" style=\"height:100%\">\n            <thead>\n            <tr>\n                <th field=\"perintah_kerja_status_nama\" width=\"100\" align=\"center\">Status</th>\n                <th field=\"waktu_daftar_date\" width=\"100\" align=\"center\">Tanggal</th>\n                <th field=\"nomor\" width=\"150\">No PKB</th>\n                <th field=\"no_antrian\" width=\"80\" align=\"center\">Antrian</th>\n                <th field=\"konsumen_nopol\" width=\"100\" align=\"center\">No Polisi</th>\n                <th field=\"konsumen_motor\" width=\"120\" align=\"center\">Motor</th>\n                <th field=\"karyawan_nama\" width=\"120\">Mekanik</th>\n                <th field=\"km\" width=\"80\" align=\"right\">KM</th>\n                <th field=\"waktu_daftar_time\" width=\"60\" align=\"center\">Daftar</th>\n                <th field=\"waktu_kerja_time\" width=\"60\" align=\"center\">Kerja</th>\n                <th field=\"waktu_selesai_time\" width=\"60\" align=\"center\">Selesai</th>\n            </tr>\n            </thead>\n        </table>\n    </div>\n    <div data-options=\"region:'south',border:false\" style=\"height:300px;padding: 10px\">\n        <div id=\"tt\" class=\"easyui-tabs\" style=\"width:100%;height: 240px\">\n            <div title=\"Point Pemeriksaan\" style=\"display:none;\">\n                <table id=\"detail_point_pemeriksaan\" style=\"height:100%\">\n                    <thead>\n                    <tr>\n                        <th field=\"checkpoint_item_kode\" width=\"80\">Kode</th>\n                        <th field=\"checkpoint_item_nama\" width=\"200\">Point</th>\n                        <th field=\"checkpoint_item_motor_jenis\" width=\"50\">Jenis</th>\n                    </tr>\n                    </thead>\n                </table>\n            </div>\n            <div title=\"Jasa Service\" style=\"display:none;\">\n                <table id=\"detail_jasa_service\" style=\"height:100%\">\n                    <thead>\n                    <tr>\n                        <th field=\"jasa_kode\" width=\"100\">Kode Jasa</th>\n                        <th field=\"jasa_nama\" width=\"250\">Nama</th>\n                        <th field=\"harga\" width=\"100\" align=\"right\" formatter=\"formatMoney\">Harga Jasa</th>\n                        <th field=\"diskon_p\" width=\"50\" align=\"right\">Diskon(%)</th>\n                        <th field=\"diskon_r\" width=\"50\" align=\"right\" formatter=\"formatMoney\">Diskon(Rp)</th>\n                        <th field=\"total\" width=\"100\" align=\"right\" formatter=\"formatMoney\">Total</th>\n                        <th field=\"beban_pembayaran_nama\" width=\"150\" align=\"center\">Pembayaran</th>\n                        <th field=\"action_delete\" width=\"80\" align=\"center\">#</th>\n                    </tr>\n                    </thead>\n                </table>\n            </div>\n            <div title=\"Suku Cadang\" style=\"display:none;\">\n                <table id=\"detail_suku_cadang\" style=\"height:100%\">\n                    <thead>\n                    <tr>\n                        <th field=\"suku_cadang_kode\" width=\"100\">Kode Part</th>\n                        <th field=\"suku_cadang_nama\" width=\"200\">Nama</th>\n                        <th field=\"harga\" width=\"120\" align=\"right\">Harga</th>\n                        <th field=\"quantity\" width=\"80\" align=\"right\">Qty</th>\n                        <th field=\"diskon_p\" width=\"80\" align=\"right\">Diskon(%)</th>\n                        <th field=\"diskon_r\" width=\"80\" align=\"right\" formatter=\"formatMoney\">Diskon(Rp)</th>\n                        <th field=\"total\" width=\"120\" align=\"right\" formatter=\"formatMoney\">Total</th>\n                        <th field=\"beban_pembayaran_nama\" width=\"150\" align=\"center\">Pembayaran</th>\n                        <th field=\"action_delete\" width=\"80\" align=\"center\">#</th>\n                    </tr>\n                    </thead>\n                </table>\n            </div>\n            <div title=\"Proses Pembayaran\" style=\"display:none;\">\n                <table id=\"detail_proses_pembayaran\" style=\"height:100%\">\n                    <thead>\n                    <tr>\n                        <th field=\"kode\" width=\"100\">Kode Part</th>\n                        <th field=\"suku_cadang_nama\" width=\"250\">Keterangan</th>\n                    </tr>\n                    </thead>\n                </table>\n            </div>\n            <div title=\"Historikal Service\" style=\"display:none;\">\n                <table id=\"detail_historikal_service\" style=\"height:100%\">\n                    <thead>\n                    <tr>\n                        <th field=\"pkb_tanggal\" width=\"80\" align=\"center\">Tgl Service</th>\n                        <th field=\"pkb_km\" width=\"80\" align=\"right\">KM</th>\n                        <th field=\"pkb_karyawan\" width=\"120\" align=\"center\">Mekanik</th>\n                        <th field=\"pkb_no\" width=\"120\" align=\"center\">No PKB</th>\n                        <th field=\"jasa_kode\" width=\"80\">Kode Jasa</th>\n                        <th field=\"jasa_nama\" width=\"250\">Keterangan</th>\n                    </tr>\n                    </thead>\n                </table>\n            </div>\n            <div title=\"Historikal Parts\" style=\"display:none;\">\n                <table id=\"detail_historikal_parts\" style=\"height:100%\">\n                    <thead>\n                    <tr>\n                        <th field=\"pkb_tanggal\" width=\"80\" align=\"center\">Tgl Pembelian</th>\n                        <th field=\"pkb_km\" width=\"80\" align=\"right\">KM</th>\n                        <th field=\"pkb_karyawan\" width=\"120\" align=\"center\">Mekanik</th>\n                        <th field=\"pkb_no\" width=\"120\" align=\"center\">No PKB</th>\n                        <th field=\"suku_cadang_kode\" width=\"100\">Kode Part</th>\n                        <th field=\"suku_cadang_nama\" width=\"250\">Keterangan</th>\n                    </tr>\n                    </thead>\n                </table>\n            </div>\n        </div>\n\n        <div style=\"height: 27px;padding: 10px 0 0\">\n            <button id=\"btn_add\" class=\"easyui-linkbutton\" data-options=\"iconCls:'icon-add'\">Tambah</button>\n            <button id=\"btn_save\" disabled class=\"easyui-linkbutton\" data-options=\"iconCls:'fam disk'\">Simpan</button>\n            <button id=\"btn_delete_item\" disabled class=\"easyui-linkbutton\" data-options=\"iconCls:'icon-no'\">Hapus Penerimaan</button>\n\n            <button id=\"btn_cetak_perintah\" disabled class=\"easyui-linkbutton\" data-options=\"iconCls:'icon-print'\">Cetak Perintah Kerja</button>\n\n            <button id=\"btn_kerjakan\" disabled class=\"easyui-linkbutton\" data-options=\"iconCls:'icon-man'\">Mulai Kerjakan</button>\n            <button id=\"btn_tunda\" disabled class=\"easyui-linkbutton\" data-options=\"iconCls:'fam clock_pause'\">Tunda</button>\n            <button id=\"btn_lanjut\" disabled class=\"easyui-linkbutton\" data-options=\"iconCls:'fam clock_play'\">Lanjutkan</button>\n            <button id=\"btn_selesai\" disabled class=\"easyui-linkbutton\" data-options=\"iconCls:'fam tick'\">Selesai</button>\n            <button id=\"btn_pembayaran\" disabled class=\"easyui-linkbutton\" data-options=\"iconCls:'fam money'\">Pembayaran</button>\n            <button id=\"btn_cetak_nota\" disabled class=\"easyui-linkbutton\" data-options=\"iconCls:'icon-print'\">Cetak Nota</button>\n\n        </div>\n    </div>\n</div>\n\n<div id=\"dialog_search_konsumen\">\n    <table class=\"easyui-datagrid\" id=\"list_konsumen\" style=\"height: 100%;width:100%\">\n        <thead>\n        <tr>\n            <th field=\"nopol\" width=\"120\">NoPol</th>\n            <th field=\"nama_identitas\" width=\"220\">Nama Identitas</th>\n            <th field=\"alamat\" width=\"220\">Alamat</th>\n            <th field=\"no_telepon\" width=\"120\" align=\"center\">No Telp</th>\n        </tr>\n        </thead>\n    </table>\n</div>\n\n<div id=\"dialog_search_jasa\">\n    <table class=\"easyui-datagrid\" id=\"list_jasa\" style=\"height: 100%;width:100%\">\n        <thead>\n        <tr>\n            <th field=\"kode\" width=\"80\">Kode</th>\n            <th field=\"nama\" width=\"200\">Nama</th>\n            <th field=\"jasa_group_nama\" width=\"80\">Group</th>\n            <th field=\"frt\" align=\"right\" width=\"80\">Frt</th>\n            <th field=\"harga\" formatter=\"formatMoney\" align=\"right\" width=\"80\">Harga</th>\n            <th field=\"pph\" align=\"right\" width=\"80\">Pph</th>\n            <th field=\"operasional\" formatter=\"formatMoney\" align=\"right\" width=\"80\">Operasional</th>\n        </tr>\n        </thead>\n    </table>\n</div>\n\n<div id=\"dialog_search_suku_cadang\">\n    <table class=\"easyui-datagrid\" id=\"list_suku_cadang\" style=\"height: 100%;width:100%\">\n        <thead>\n        <tr>\n            <th field=\"kode\" width=\"120\">Kode Part</th>\n            <th field=\"nama\" width=\"220\">Nama</th>\n            <th field=\"nama_sinonim\" width=\"220\">Sinonim</th>\n            <th field=\"harga_jual\" width=\"80\" align=\"right\" formatter=\"formatMoney\">Harga Jual</th>\n            <th field=\"quantity\" width=\"80\" align=\"right\">Quantity</th>\n            <th field=\"opname_terakhir\" width=\"120\" align=\"center\">Opname Terakhir</th>\n        </tr>\n        </thead>\n    </table>\n</div>\n\n<div id=\"dialog_mekanik\" class=\"easyui-dialog\">\n    <div style=\"padding: 20px 30px\">\n        ";
echo yii\helpers\Html::dropDownList("mekanik_id", NULL, yii\helpers\ArrayHelper::map(app\models\User::getNotBusyUsers(), "id", "name"), array("class" => "easyui-combobox", "id" => "mekanik_id", "label" => "Mekanik", "labelWidth" => "100px", "style" => "width:300px", "valueField" => "id", "textField" => "text"));
echo "    </div>\n</div>\n\n<div id=\"dialog_pembayaran_pkb\" class=\"easyui-window\" style=\"padding: 10px 20px;\">\n    <form id=\"ff\" method=\"post\">\n        <div style=\"margin-bottom:5px\">\n            <input id=\"dialog_no_pkb\" name=\"dialog_no_pkb\" class=\"easyui-textbox\"\n                   disabled style=\"width:300px\" label='No. PKB :' labelWidth=\"150px\">\n        </div>\n        <div style=\"margin-bottom:5px\">\n            <input id=\"dialog_no_nsc\" name=\"dialog_no_nsc\" class=\"easyui-textbox\"\n                   disabled style=\"width:300px\" label='No. NSC :' labelWidth=\"150px\">\n        </div>\n        <div style=\"margin-bottom:25px\">\n            <input id=\"dialog_no_njb\" name=\"dialog_no_njb\" class=\"easyui-textbox\"\n                   disabled style=\"width:300px\" label='No. NJB :' labelWidth=\"150px\">\n        </div>\n\n\n        <div style=\"margin-bottom:20px\">\n            <input id=\"dialog_total\" name=\"dialog_total\" class=\"easyui-numberbox\"\n                   precision=\"0\" decimalSeparator=\",\" groupSeparator=\".\"\n                   disabled style=\"width:300px;text-align: right;\" label='Total Kas Harus Dibayar :' labelWidth=\"150px\">\n        </div>\n        <div style=\"margin-bottom:5px\">\n            <input id=\"dialog_tunai\" name=\"dialog_tunai\" class=\"easyui-numberbox\"\n                   precision=\"0\" decimalSeparator=\",\" groupSeparator=\".\"\n                   style=\"width:300px;text-align: right;\" label='Tunai :' labelWidth=\"150px\">\n        </div>\n        <div style=\"margin-bottom:20px\">\n            <input id=\"dialog_debit\" name=\"dialog_debit\" class=\"easyui-numberbox\"\n                   precision=\"0\" decimalSeparator=\",\" groupSeparator=\".\"\n                   style=\"width:300px;text-align: right;\" label='Kartu Debit :' labelWidth=\"150px\">\n        </div>\n        <div style=\"margin-bottom:5px\">\n            <input id=\"dialog_terminal\" name=\"dialog_terminal\" class=\"easyui-textbox\"\n                   style=\"width:300px\" label='Terminal :' labelWidth=\"150px\">\n        </div>\n        <div style=\"margin-bottom:5px\">\n            <input id=\"dialog_bank\" name=\"dialog_bank\" class=\"easyui-textbox\"\n                   style=\"width:300px\" label='Bank :' labelWidth=\"150px\">\n        </div>\n        <div style=\"margin-bottom:5px\">\n            <input id=\"dialog_no_kartu\" name=\"dialog_no_kartu\" class=\"easyui-textbox\"\n                   style=\"width:300px\" label='No Kartu :' labelWidth=\"150px\">\n        </div>\n        <div style=\"margin-bottom:5px\">\n            <input id=\"dialog_pemilik\" name=\"dialog_pemilik\" class=\"easyui-textbox\"\n                   style=\"width:300px\" label='Pemilik :' labelWidth=\"150px\">\n        </div>\n        <div style=\"margin-bottom:20px\">\n            <input id=\"dialog_approval_code\" name=\"dialog_approval_code\" class=\"easyui-textbox\"\n                   style=\"width:300px\" label='Approval Code :' labelWidth=\"150px\">\n        </div>\n        <div style=\"margin-bottom:5px\">\n            <input id=\"dialog_kembali\" name=\"dialog_kembali\" class=\"easyui-numberbox\"\n                   precision=\"0\" decimalSeparator=\",\" groupSeparator=\".\"\n                   disabled style=\"width:300px;text-align: right;\" label='Kembali :' labelWidth=\"150px\">\n        </div>\n        <div style=\"text-align: center;margin-top: 20px\">\n            <button id=\"btn_dialog_bayar\" class=\"easyui-linkbutton\" type=\"button\"\n                    data-options=\"iconCls:'fam money'\" style=\"width: 150px\">\n                Bayar\n            </button>\n        </div>\n    </form>\n</div>\n\n<div id=\"dialog_edit_suku_cadang\" class=\"easyui-window\" style=\"padding: 10px 20px;\">\n    <form id=\"dialog_edit__\" method=\"post\">\n        <div style=\"margin-bottom:5px\">\n            <input id=\"dialog_edit_harga\" class=\"easyui-numberbox\"\n                   precision=\"0\" decimalSeparator=\",\" groupSeparator=\".\"\n                   disabled style=\"width:260px;text-align: right\" label='Harga :' labelWidth=\"150px\">\n        </div>\n        <div style=\"margin-bottom:5px\">\n            <input id=\"dialog_edit_quantity\" class=\"easyui-numberbox\"\n                   precision=\"0\" decimalSeparator=\",\" groupSeparator=\".\"\n                   style=\"width:200px;text-align: right\" label='Qty :' labelWidth=\"150px\">\n        </div>\n        <div style=\"margin-bottom:5px\">\n            <input id=\"dialog_edit_diskon_p\" class=\"easyui-numberbox\"\n                   precision=\"2\" decimalSeparator=\",\" groupSeparator=\".\"\n                   style=\"width:200px;text-align: right\" label='Diskon(%) :' labelWidth=\"150px\">\n        </div>\n        <div style=\"margin-bottom:5px\">\n            <input id=\"dialog_edit_diskon_r\" class=\"easyui-numberbox\"\n                   precision=\"0\" decimalSeparator=\",\" groupSeparator=\".\"\n                   style=\"width:200px;text-align: right\" label='Diskon(Rp) :' labelWidth=\"150px\">\n        </div>\n        <div style=\"margin-bottom:5px\">\n            <input id=\"dialog_edit_total\" class=\"easyui-numberbox\"\n                   precision=\"0\" decimalSeparator=\",\" groupSeparator=\".\"\n                   disabled style=\"width:260px;text-align: right\" label='Subtotal :' labelWidth=\"150px\">\n        </div>\n        <div style=\"margin-bottom:5px\">\n            ";
echo yii\helpers\Html::dropDownList("dialog_edit_beban_pembayaran_id", NULL, yii\helpers\ArrayHelper::map(app\models\BebanPembayaran::find()->all(), "id", "nama"), array("class" => "easyui-combobox", "id" => "dialog_edit_beban_pembayaran_id", "label" => "Beban Pembayaran", "labelWidth" => "150px", "style" => "width:300px"));
echo "        </div>\n\n        <div style=\"text-align: center;margin-top: 20px\">\n            <button id=\"btn_dialog_edit_simpan\" class=\"easyui-linkbutton\" type=\"button\"\n                    data-options=\"iconCls:'fam disk'\" style=\"width: 150px\">\n                Simpan\n            </button>\n        </div>\n    </form>\n</div>\n\n<div id=\"dialog_edit_jasa\" class=\"easyui-window\" style=\"padding: 10px 20px;\">\n    <form id=\"dialog_edit___\" method=\"post\">\n        <div style=\"margin-bottom:5px\">\n            <input id=\"dialog_edit_jasa_harga\" class=\"easyui-numberbox\"\n                   precision=\"0\" decimalSeparator=\",\" groupSeparator=\".\"\n                   disabled style=\"width:260px;text-align: right\" label='Harga :' labelWidth=\"150px\">\n        </div>\n        <div style=\"margin-bottom:5px\">\n            <input id=\"dialog_edit_jasa_diskon_p\" class=\"easyui-numberbox\"\n                   precision=\"2\" decimalSeparator=\",\" groupSeparator=\".\"\n                   style=\"width:200px;text-align: right\" label='Diskon(%) :' labelWidth=\"150px\">\n        </div>\n        <div style=\"margin-bottom:5px\">\n            <input id=\"dialog_edit_jasa_diskon_r\" class=\"easyui-numberbox\"\n                   precision=\"0\" decimalSeparator=\",\" groupSeparator=\".\"\n                   style=\"width:200px;text-align: right\" label='Diskon(Rp) :' labelWidth=\"150px\">\n        </div>\n        <div style=\"margin-bottom:5px\">\n            <input id=\"dialog_edit_jasa_total\" class=\"easyui-numberbox\"\n                   precision=\"0\" decimalSeparator=\",\" groupSeparator=\".\"\n                   disabled style=\"width:260px;text-align: right\" label='Subtotal :' labelWidth=\"150px\">\n        </div>\n        <div style=\"margin-bottom:5px\">\n            ";
echo yii\helpers\Html::dropDownList("dialog_edit_jasa_beban_pembayaran_id", NULL, yii\helpers\ArrayHelper::map(app\models\BebanPembayaran::find()->all(), "id", "nama"), array("class" => "easyui-combobox", "id" => "dialog_edit_jasa_beban_pembayaran_id", "label" => "Beban Pembayaran", "labelWidth" => "150px", "style" => "width:300px"));
echo "        </div>\n\n        <div style=\"text-align: center;margin-top: 20px\">\n            <button id=\"btn_dialog_edit_jasa_simpan\" class=\"easyui-linkbutton\" type=\"button\"\n                    data-options=\"iconCls:'fam disk'\" style=\"width: 150px\">\n                Simpan\n            </button>\n        </div>\n    </form>\n</div>\n\n<div id=\"dialog_jenis_cetak\" class=\"easyui-dialog\">\n    <div style=\"padding: 20px 30px\">\n        ";
echo yii\helpers\Html::dropDownList("jenis_cetak", NULL, array("satu" => "Gabungan", "dua" => "Terpisah"), array("class" => "easyui-combobox", "id" => "jenis_cetak", "label" => "Pilih Jenis Nota", "labelWidth" => "100px", "style" => "width:300px"));
echo "    </div>\n</div>\n\n<script>\n    var selectedPekerjaan = null;\n\n    \$(\"#btn_dialog_bayar\").linkbutton({\n        onClick: function(){\n            \$(\"#btn_dialog_bayar\").linkbutton('disable');\n\n            \$.ajax({\n                url: \"";
echo yii\helpers\Url::to(array("bayar"));
echo "?id=\" + selectedPekerjaan.id,\n                data : {\n                    tunai : \$(\"#dialog_tunai\").numberbox('getValue'),\n                    debit : \$(\"#dialog_debit\").numberbox('getValue'),\n                    terminal : \$(\"#dialog_terminal\").textbox('getValue'),\n                    bank : \$(\"#dialog_bank\").textbox('getValue'),\n                    no_kartu : \$(\"#dialog_no_kartu\").textbox('getValue'),\n                    pemilik : \$(\"#dialog_pemilik\").textbox('getValue'),\n                    approval_code : \$(\"#dialog_approval_code\").textbox('getValue'),\n                },\n                type: \"post\",\n                dataType: \"json\",\n                success: function (msg) {\n                    dialog(msg.message);\n                    \$(\"#dialog_pembayaran_pkb\").window('close');\n\n                    selectedPekerjaan = msg.model;\n\n                    \$(\"#list_pekerjaan\").datagrid('reload');\n\n                    refreshButtons();\n                    reloadAllDetail();\n                }\n            });\n        }\n    });\n\n\n    //Search Konsumen\n    \$(document).off(\"click\", \".btn-konsumen-gunakan\");\n    \$(document).on(\"click\", \".btn-konsumen-gunakan\", function () {\n        var data_id = \$(this).attr(\"data_id\");\n        \$(\"#konsumen_id\").combobox(\"reload\", \"";
echo yii\helpers\Url::to(array("nopol-combo"));
echo "?id=\" + data_id);\n        \$(\"#konsumen_id\").combobox(\"select\", data_id);\n        \$('#dialog_search_konsumen').window('close');\n        return false;\n    });\n\n    function showDataKonsumen(data_id){\n        if(data_id != null){\n        \$.ajax({\n            url : \"";
echo yii\helpers\Url::to(array("load-konsumen"));
echo "?id=\"+data_id,\n            dataType: \"json\",\n            success: function(msg){\n                \$(\"#konsumen_nama\").textbox(\"setValue\", msg.nama_identitas);\n                \$(\"#konsumen_no_telepon\").textbox(\"setValue\", msg.no_telepon).textbox('enable');\n                \$(\"#konsumen_no_mesin\").textbox(\"setValue\", msg.no_mesin);\n                \$(\"#konsumen_motor_id\").combobox(\"select\", msg.motor_id).combobox('enable');\n            }\n        });\n        }else{\n            \$(\"#konsumen_nama\").textbox(\"setValue\", \"\").textbox('disable');\n            \$(\"#konsumen_no_telepon\").textbox(\"setValue\", \"\").textbox('disable');\n            \$(\"#konsumen_no_mesin\").textbox(\"setValue\", \"\").textbox('disable');\n            \$(\"#konsumen_motor_id\").combobox(\"select\", \"\").textbox('disable');\n        }\n    }\n\n    \$(\"#list_konsumen\").datagrid({\n        url: \"";
echo yii\helpers\Url::to(array("list-konsumen"));
echo "\",\n        singleSelect: true,\n        pagination: true,\n        rownumbers: true,\n        fitColumns: true,\n        //pageSize: 19,\n        toolbar: addSearchToolbar(\"list_konsumen\"),\n        onDblClickRow: function(index, row){\n            var data_id = row.id;\n            \$(\"#konsumen_id\").combobox(\"reload\", \"";
echo yii\helpers\Url::to(array("nopol-combo"));
echo "?id=\" + data_id);\n            \$(\"#konsumen_id\").combobox(\"select\", data_id);\n            showDataKonsumen(data_id);\n            \$('#dialog_search_konsumen').window('close');\n        }\n    });\n\n    \$(\"#btn_search_konsumen\").linkbutton({\n        onClick: function () {\n            \$('#dialog_search_konsumen').window('open');\n            return false;\n        }\n    });\n\n    //Search Jasa\n    \$(\"#list_jasa\").datagrid({\n        url: \"";
echo yii\helpers\Url::to(array("list-jasa"));
echo "\",\n        singleSelect: true,\n        pagination: true,\n        rownumbers: true,\n        fitColumns: true,\n        //pageSize: 19,\n        toolbar: addSearchToolbar(\"list_jasa\"),\n        onDblClickRow: function(index, row){\n            if (selectedPekerjaan == null) {\n                dialog(\"Silakan pilih Penerimaan Service terlebih dahulu\");\n                return;\n            }\n            var data_id = row.id;\n            \$.ajax({\n                url: \"";
echo yii\helpers\Url::to(array("add-detail-jasa"));
echo "\",\n                data: {\n                    jasa_id: data_id,\n                    perintah_kerja_id: selectedPekerjaan.id\n                },\n                type: \"post\",\n                dataType: \"json\",\n                success: function (msg) {\n                    selectedPekerjaan = msg.model;\n                    reloadAllDetail();\n                },\n                error: function(xhr, ajaxOptions, thrownError){\n                    dialog(xhr.responseJSON.message);\n                }\n            });\n            //\$('#dialog_search_jasa').window('close');\n        }\n    });\n\n\n\n    \$(\"#list_suku_cadang\").datagrid({\n        url: \"";
echo yii\helpers\Url::to(array("list-suku-cadang"));
echo "\",\n        singleSelect: true,\n        pagination: true,\n        rownumbers: true,\n        fitColumns: true,\n        //pageSize: 19,\n        toolbar: addSearchToolbar(\"list_suku_cadang\"),\n        onDblClickRow: function(index, row){\n            if (selectedPekerjaan == null) {\n                dialog(\"Silakan pilih Penerimaan Service terlebih dahulu\");\n                return;\n            }\n            //if(row.quantity == 0){\n            //    dialog(\"Suku cadang yang Anda pilih tidak memiliki stok.\");\n            //    return;\n            //}\n            var data_id = row.id;\n            \$.ajax({\n                url: \"";
echo yii\helpers\Url::to(array("add-detail-sukucadang"));
echo "\",\n                data: {\n                    suku_cadang_id: data_id,\n                    perintah_kerja_id: selectedPekerjaan.id\n                },\n                type: \"post\",\n                dataType: \"json\",\n                success: function (msg) {\n                    //dialog(msg.message);\n                    selectedPekerjaan = msg.model;\n                    reloadAllDetail();\n                },\n                error: function(xhr, ajaxOptions, thrownError){\n                    dialog(xhr.responseJSON.message);\n                }\n            });\n            //\$('#dialog_search_suku_cadang').window('close');\n        }\n    });\n\n\n\n    function refreshButtons(){\n        \$.ajax({\n            url: \"";
echo yii\helpers\Url::to(array("load"));
echo "?id=\" + selectedPekerjaan.id,\n            dataType: \"json\",\n            success: function (msg) {\n                if(msg.perintah_kerja_status_id == 1){\n                    //tunggu\n                    \$(\"#btn_delete_item\").linkbutton(\"enable\");\n                    \$(\"#btn_kerjakan\").linkbutton(\"enable\");\n                    \$(\"#btn_tunda\").linkbutton(\"disable\");\n                    \$(\"#btn_lanjut\").linkbutton(\"disable\");\n                    \$(\"#btn_selesai\").linkbutton(\"disable\");\n                    \$(\"#btn_pembayaran\").linkbutton(\"disable\");\n                    \$(\"#btn_cetak_perintah\").linkbutton(\"enable\");\n                    \$(\"#btn_cetak_nota\").linkbutton(\"disable\");\n                }else if(msg.perintah_kerja_status_id == 2){\n                    //dikerjakan\n                    \$(\"#btn_delete_item\").linkbutton(\"enable\");\n                    \$(\"#btn_kerjakan\").linkbutton(\"disable\");\n                    \$(\"#btn_tunda\").linkbutton(\"enable\");\n                    \$(\"#btn_lanjut\").linkbutton(\"disable\");\n                    \$(\"#btn_selesai\").linkbutton(\"enable\");\n                    \$(\"#btn_pembayaran\").linkbutton(\"disable\");\n                    \$(\"#btn_cetak_perintah\").linkbutton(\"disable\");\n                    \$(\"#btn_cetak_nota\").linkbutton(\"disable\");\n                }else if(msg.perintah_kerja_status_id == 3){\n                    //selesai\n                    \$(\"#btn_delete_item\").linkbutton(\"enable\");\n                    \$(\"#btn_kerjakan\").linkbutton(\"disable\");\n                    \$(\"#btn_tunda\").linkbutton(\"disable\");\n                    \$(\"#btn_lanjut\").linkbutton(\"disable\");\n                    \$(\"#btn_selesai\").linkbutton(\"disable\");\n                    \$(\"#btn_pembayaran\").linkbutton(\"enable\");\n                    \$(\"#btn_cetak_perintah\").linkbutton(\"disable\");\n                    \$(\"#btn_cetak_nota\").linkbutton(\"enable\");\n                }else if(msg.perintah_kerja_status_id == 4){\n                    //nota\n                    \$(\"#btn_delete_item\").linkbutton(\"disable\");\n                    \$(\"#btn_kerjakan\").linkbutton(\"disable\");\n                    \$(\"#btn_tunda\").linkbutton(\"disable\");\n                    \$(\"#btn_lanjut\").linkbutton(\"disable\");\n                    \$(\"#btn_selesai\").linkbutton(\"disable\");\n                    \$(\"#btn_pembayaran\").linkbutton(\"disable\");\n                    \$(\"#btn_cetak_perintah\").linkbutton(\"disable\");\n                    \$(\"#btn_cetak_nota\").linkbutton(\"enable\");\n                }else if(msg.perintah_kerja_status_id == 5){\n                    //batal\n                    \$(\"#btn_delete_item\").linkbutton(\"disable\");\n                    \$(\"#btn_kerjakan\").linkbutton(\"disable\");\n                    \$(\"#btn_tunda\").linkbutton(\"disable\");\n                    \$(\"#btn_lanjut\").linkbutton(\"disable\");\n                    \$(\"#btn_selesai\").linkbutton(\"disable\");\n                    \$(\"#btn_pembayaran\").linkbutton(\"disable\");\n                    \$(\"#btn_cetak_perintah\").linkbutton(\"disable\");\n                    \$(\"#btn_cetak_nota\").linkbutton(\"disable\");\n                }else if(msg.perintah_kerja_status_id == 6){\n                    //tunda\n                    \$(\"#btn_delete_item\").linkbutton(\"enable\");\n                    \$(\"#btn_kerjakan\").linkbutton(\"disable\");\n                    \$(\"#btn_tunda\").linkbutton(\"disable\");\n                    \$(\"#btn_lanjut\").linkbutton(\"enable\");\n                    \$(\"#btn_selesai\").linkbutton(\"disable\");\n                    \$(\"#btn_pembayaran\").linkbutton(\"disable\");\n                    \$(\"#btn_cetak_perintah\").linkbutton(\"disable\");\n                    \$(\"#btn_cetak_nota\").linkbutton(\"disable\");\n                }\n            }\n        });\n    }\n\n\n\n    function selectPekerjaan(){\n        \$(\"#nomor\").textbox(\"setValue\", selectedPekerjaan.nomor);\n        \$(\"#waktu_daftar\").datebox(\"setValue\", selectedPekerjaan.waktu_daftar);\n        \$(\"#no_antrian\").textbox(\"enable\").textbox(\"setValue\", selectedPekerjaan.no_antrian);\n        \$(\"#perintah_kerja_alasan_id\").combobox(\"enable\").combobox(\"select\", selectedPekerjaan.perintah_kerja_alasan_id);\n        \$(\"#konsumen_motor_id\").combobox(\"enable\").combobox(\"select\", selectedPekerjaan.motor_id);\n        \$(\"#konsumen_id\").combobox(\"reload\", \"";
echo yii\helpers\Url::to(array("nopol-combo"));
echo "?id=\" + selectedPekerjaan.konsumen_id);\n        \$(\"#konsumen_id\").combobox(\"select\", selectedPekerjaan.konsumen_id);\n        \$(\"#konsumen_nama\").textbox(\"setValue\", \"\");\n        \$(\"#konsumen_no_telepon\").textbox(\"setValue\", \"\");\n        \$(\"#konsumen_no_mesin\").textbox(\"setValue\", \"\");\n        \$(\"#kondisi_awal\").textbox(\"enable\").textbox(\"setValue\", selectedPekerjaan.kondisi_awal);\n        \$(\"#keluhan\").textbox(\"enable\").textbox(\"setValue\", selectedPekerjaan.keluhan);\n        \$(\"#analisa\").textbox(\"enable\").textbox(\"setValue\", selectedPekerjaan.analisa);\n        \$(\"#km\").textbox(\"enable\").textbox(\"setValue\", selectedPekerjaan.km);\n        \$(\"#bbm\").combobox(\"enable\").combobox(\"setValue\", selectedPekerjaan.bbm);\n        \$(\"#konfirmasi\").removeAttr(\"disabled\").prop(\"checked\", selectedPekerjaan.konfirmasi == 1 ? true : false);\n        //\$(\"#dari_sms\").removeAttr(\"disabled\").prop(\"checked\", selectedPekerjaan.dari_sms == 1 ? true : false);\n\n        \$(\"#catatan\").textbox(\"enable\").textbox(\"setValue\", selectedPekerjaan.catatan);\n\n        \$(\"#btn_search_konsumen\").linkbutton(\"enable\");\n        \$(\"#btn_cetak_perintah\").linkbutton(\"enable\");\n        \$(\"#btn_cetak_nota\").linkbutton(\"enable\");\n\n        \$(\"#btn_save\").linkbutton(\"enable\");\n        \$(\"#btn_delete_item\").linkbutton(\"enable\");\n        \$(\"#btn_mark_complete\").linkbutton(\"enable\");\n    }\n\n    \$(\"#list_pekerjaan\").datagrid({\n        url: \"";
echo yii\helpers\Url::to(array("list-pekerjaan"));
echo "\",\n        singleSelect: true,\n        //pagination: true,\n        rownumbers: true,\n        fitColumns: true,\n        onClickRow: function (index, row) {\n            selectedPekerjaan = row;\n            showDataKonsumen(row.konsumen_id);\n            selectPekerjaan();\n            refreshButtons();\n            reloadAllDetail();\n        }\n    });\n\n    function reloadAllDetail() {\n        var id = null;\n        if(selectedPekerjaan != null){\n            id = selectedPekerjaan.id;\n        }\n        \$(\"#detail_point_pemeriksaan\").datagrid(\"reload\", \"";
echo yii\helpers\Url::to(array("detail-point-pemeriksaan", "id" => ""));
echo "\" + id);\n        \$(\"#detail_jasa_service\").datagrid(\"reload\", \"";
echo yii\helpers\Url::to(array("detail-jasa-service", "id" => ""));
echo "\" + id);\n        \$(\"#detail_suku_cadang\").datagrid(\"reload\", \"";
echo yii\helpers\Url::to(array("detail-suku-cadang", "id" => ""));
echo "\" + id);\n        \$(\"#detail_proses_pembayaran\").datagrid(\"reload\", \"";
echo yii\helpers\Url::to(array("detail-proses-pembayaran", "id" => ""));
echo "\" + id);\n        \$(\"#detail_historikal_service\").datagrid(\"reload\", \"";
echo yii\helpers\Url::to(array("detail-historikal-service", "id" => ""));
echo "\" + id);\n        \$(\"#detail_historikal_parts\").datagrid(\"reload\", \"";
echo yii\helpers\Url::to(array("detail-historikal-parts", "id" => ""));
echo "\" + id);\n    }\n\n    \$(\"#detail_point_pemeriksaan\").datagrid({\n        url: \"";
echo yii\helpers\Url::to(array("detail-point-pemeriksaan"));
echo "\",\n        singleSelect: true,\n        pagination: true,\n        rownumbers: true,\n    });\n    var detail_jasa = null;\n    \$(\"#detail_jasa_service\").datagrid({\n        url: \"";
echo yii\helpers\Url::to(array("detail-jasa-service"));
echo "\",\n        singleSelect: true,\n        pagination: true,\n        rownumbers: true,\n        fitColumns: true,\n        onClickRow: function (index, row) {\n            detail_jasa = row;\n        },\n        toolbar: [{\n            iconCls: 'icon-add',\n            handler: function () {\n                \$(\"#dialog_search_jasa\").window('open');\n                \$(\"#list_jasa_query\").val(\"\");\n                \$('#list_jasa').datagrid('load',{query: \"\"});\n            }\n        }]\n    });\n    \$(\"#btn_dialog_edit_jasa_simpan\").linkbutton({\n        onClick: function(){\n            \$.ajax({\n                url: \"";
echo yii\helpers\Url::to(array("save-detail-jasa"));
echo "?id=\" + dialogDetailJasa.id,\n                data : {\n                    harga : \$(\"#dialog_edit_jasa_harga\").numberbox('getValue'),\n                    diskon_r : \$(\"#dialog_edit_jasa_diskon_r\").numberbox('getValue'),\n                    diskon_p : \$(\"#dialog_edit_jasa_diskon_p\").numberbox('getValue'),\n                    total : \$(\"#dialog_edit_jasa_total\").numberbox('getValue'),\n                    beban_pembayaran_id : \$(\"#dialog_edit_jasa_beban_pembayaran_id\").combobox('getValue')\n                },\n                type: \"post\",\n                dataType: \"json\",\n                success: function (msg) {\n                    if (msg.status == 200) {\n                        dialog(\"Detail jasa berhasil disimpan.\")\n                    }\n                    \$(\"#dialog_edit_jasa\").window('close');\n\n                    reloadAllDetail();\n                },\n                error: function(xhr, ajaxOptions, thrownError){\n                    dialog(xhr.responseJSON.message);\n                }\n            });\n        }\n    });\n    \$(document).off(\"click\", \".btn-edit-jasa\");\n    \$(document).on(\"click\", \".btn-edit-jasa\", function () {\n        \$(\"#dialog_edit_jasa\").window('open');\n\n        \$.ajax({\n            url: \"";
echo yii\helpers\Url::to(array("info-detail-jasa"));
echo "?id=\" + \$(this).attr(\"data_id\"),\n            dataType: \"json\",\n            success: function (msg) {\n                if (msg.status == 200) {\n                    var detail = msg.model;\n                    \$(\"#dialog_edit_jasa_harga\").numberbox(\"setValue\", detail.harga);\n                    \$(\"#dialog_edit_jasa_diskon_p\").numberbox(\"setValue\", detail.diskon_p);\n                    \$(\"#dialog_edit_jasa_diskon_r\").numberbox(\"setValue\", detail.diskon_r);\n                    \$(\"#dialog_edit_jasa_total\").numberbox(\"setValue\", detail.total);\n                    \$(\"#dialog_edit_jasa_beban_pembayaran_id\").combobox('select', detail.beban_pembayaran_id);\n                    dialogDetailJasa = detail;\n                }\n            },\n            error: function(xhr, ajaxOptions, thrownError){\n                dialog(xhr.responseJSON.message);\n            }\n        });\n\n        return false;\n    });\n    \$(document).off(\"click\", \".btn-hapus-jasa\");\n    \$(document).on(\"click\", \".btn-hapus-jasa\", function () {\n        \$.ajax({\n            url: \"";
echo yii\helpers\Url::to(array("delete-detail-jasa"));
echo "?id=\" + \$(this).attr(\"data_id\"),\n            dataType: \"json\",\n            success: function (msg) {\n                if (msg.status == 200) {\n                    reloadAllDetail();\n                }\n            },\n            error: function(xhr, ajaxOptions, thrownError){\n                dialog(xhr.responseJSON.message);\n            }\n        });\n        return false;\n    });\n    var detail_suku_cadang = null;\n    \$(\"#detail_suku_cadang\").datagrid({\n        url: \"";
echo yii\helpers\Url::to(array("detail-suku-cadang"));
echo "\",\n        singleSelect: true,\n        pagination: true,\n        rownumbers: true,\n        fitColumns: true,\n        onClickRow: function (index, row) {\n            detail_suku_cadang = row;\n        },\n        toolbar: [{\n            iconCls: 'icon-add',\n            handler: function () {\n                \$(\"#dialog_search_suku_cadang\").window('open');\n                \$(\"#list_suku_cadang_query\").val(\"\");\n                \$('#list_suku_cadang').datagrid('load',{query: \"\"});\n            }\n        }]\n    });\n\n\n\n    var dialogDetailSukuCadang = null;\n\n    function hitungDetailTotal(){\n        var quantity = parseInt(\$(\"#dialog_edit_quantity\").numberbox(\"getValue\"));\n        var harga = parseInt(\$(\"#dialog_edit_harga\").numberbox(\"getValue\"));\n        var diskon_p = parseInt(\$(\"#dialog_edit_diskon_p\").numberbox(\"getValue\"));\n        var diskon_r = parseInt(\$(\"#dialog_edit_diskon_r\").numberbox(\"getValue\"));\n\n        var total = quantity * harga;\n        if(diskon_p != 0){\n            total = total - (diskon_p/100*total);\n        }else{\n            total = total - diskon_r;\n        }\n        \$(\"#dialog_edit_total\").numberbox(\"setValue\", total);\n    }\n\n    \$(\"#dialog_edit_quantity\").numberbox({\n        onChange: function(){\n            hitungDetailTotal();\n        }\n    });\n\n    \$(\"#dialog_edit_diskon_p\").numberbox({\n        onChange: function(){\n            hitungDetailTotal();\n        }\n    });\n\n    \$(\"#dialog_edit_diskon_r\").numberbox({\n        onChange: function(){\n            hitungDetailTotal();\n        }\n    });\n\n    //Hitung Jasa\n    function hitungJasaDetailTotal(){\n        var harga = parseInt(\$(\"#dialog_edit_jasa_harga\").numberbox(\"getValue\"));\n        var diskon_p = parseInt(\$(\"#dialog_edit_jasa_diskon_p\").numberbox(\"getValue\"));\n        var diskon_r = parseInt(\$(\"#dialog_edit_jasa_diskon_r\").numberbox(\"getValue\"));\n\n        var total = harga;\n        if(diskon_p != 0){\n            total = total - (diskon_p/100*total);\n        }else{\n            total = total - diskon_r;\n        }\n        \$(\"#dialog_edit_jasa_total\").numberbox(\"setValue\", total);\n    }\n\n    \$(\"#dialog_edit_jasa_diskon_p\").numberbox({\n        onChange: function(){\n            hitungJasaDetailTotal();\n        }\n    });\n\n    \$(\"#dialog_edit_jasa_diskon_r\").numberbox({\n        onChange: function(){\n            hitungJasaDetailTotal();\n        }\n    });\n\n    \$(\"#btn_dialog_edit_simpan\").linkbutton({\n        onClick: function(){\n            \$.ajax({\n                url: \"";
echo yii\helpers\Url::to(array("save-detail-sukucadang"));
echo "?id=\" + dialogDetailSukuCadang.id,\n                data : {\n                    quantity : \$(\"#dialog_edit_quantity\").numberbox('getValue'),\n                    harga : \$(\"#dialog_edit_harga\").numberbox('getValue'),\n                    diskon_r : \$(\"#dialog_edit_diskon_r\").numberbox('getValue'),\n                    diskon_p : \$(\"#dialog_edit_diskon_p\").numberbox('getValue'),\n                    total : \$(\"#dialog_edit_total\").numberbox('getValue'),\n                    beban_pembayaran_id : \$(\"#dialog_edit_beban_pembayaran_id\").combobox('getValue')\n                },\n                type: \"post\",\n                dataType: \"json\",\n                success: function (msg) {\n                    if (msg.status == 200) {\n                        dialog(\"Detail suku cadang berhasil disimpan.\")\n                    }\n                    \$(\"#dialog_edit_suku_cadang\").window('close');\n\n                    reloadAllDetail();\n                },\n                error: function(xhr, ajaxOptions, thrownError){\n                    dialog(xhr.responseJSON.message);\n                }\n            });\n        }\n    });\n\n    \$(document).off(\"click\", \".btn-edit-sukucadang\");\n    \$(document).on(\"click\", \".btn-edit-sukucadang\", function () {\n        \$(\"#dialog_edit_suku_cadang\").window('open');\n\n        \$.ajax({\n            url: \"";
echo yii\helpers\Url::to(array("info-detail-sukucadang"));
echo "?id=\" + \$(this).attr(\"data_id\"),\n            dataType: \"json\",\n            success: function (msg) {\n                if (msg.status == 200) {\n                    var detail = msg.model;\n                    \$(\"#dialog_edit_harga\").numberbox(\"setValue\", detail.harga);\n                    \$(\"#dialog_edit_quantity\").numberbox(\"setValue\", detail.quantity);\n                    \$(\"#dialog_edit_diskon_p\").numberbox(\"setValue\", detail.diskon_p);\n                    \$(\"#dialog_edit_diskon_r\").numberbox(\"setValue\", detail.diskon_r);\n                    \$(\"#dialog_edit_total\").numberbox(\"setValue\", detail.total);\n                    \$(\"#dialog_edit_beban_pembayaran_id\").combobox('select', detail.beban_pembayaran_id);\n                    dialogDetailSukuCadang = detail;\n                }\n            },\n            error: function(xhr, ajaxOptions, thrownError){\n                dialog(xhr.responseJSON.message);\n            }\n        });\n\n        return false;\n    });\n    \$(document).off(\"click\", \".btn-hapus-sukucadang\");\n    \$(document).on(\"click\", \".btn-hapus-sukucadang\", function () {\n        \$.ajax({\n            url: \"";
echo yii\helpers\Url::to(array("delete-detail-sukucadang"));
echo "?id=\" + \$(this).attr(\"data_id\"),\n            dataType: \"json\",\n            success: function (msg) {\n                if (msg.status == 200) {\n                    reloadAllDetail();\n                }\n            },\n            error: function(xhr, ajaxOptions, thrownError){\n                dialog(xhr.responseJSON.message);\n            }\n        });\n        return false;\n    });\n    \$(\"#detail_proses_pembayaran\").datagrid({\n        url: \"";
echo yii\helpers\Url::to(array("detail-proses-pembayaran"));
echo "\",\n        singleSelect: true,\n        pagination: true,\n        rownumbers: true,\n        fitColumns: true,\n    });\n    \$(\"#detail_historikal_service\").datagrid({\n        url: \"";
echo yii\helpers\Url::to(array("detail-historikal-service"));
echo "\",\n        singleSelect: true,\n        pagination: true,\n        rownumbers: true,\n        fitColumns: true,\n    });\n    \$(\"#detail_historikal_parts\").datagrid({\n        url: \"";
echo yii\helpers\Url::to(array("detail-historikal-parts"));
echo "\",\n        singleSelect: true,\n        pagination: true,\n        rownumbers: true,\n        fitColumns: true,\n    });\n\n    function refreshKembalian(){\n        var tunai = parseInt(\$(\"#dialog_tunai\").numberbox('getValue'));\n        var debit = parseInt(\$(\"#dialog_debit\").numberbox('getValue'));\n        var total = parseInt(\$(\"#dialog_total\").numberbox('getValue'));\n        var kembali = debit + tunai - total;\n        \$(\"#dialog_kembali\").numberbox(\"setValue\", kembali);\n    }\n\n    \$(\"#dialog_tunai\").numberbox({\n        onChange: function(){\n            refreshKembalian();\n        }\n    });\n\n    \$(\"#dialog_debit\").numberbox({\n        onChange: function(){\n            refreshKembalian();\n        }\n    });\n\n    setTitle(\"Penerimaan Service\");\n</script>\n\n<!-- # Region Dialog # -->\n<script>\n    \$(\"#dialog_pembayaran_pkb\").window({\n        width: 370,\n        height: 550,\n        modal: true,\n        closed: true,\n        title: \"Pembayaran\"\n    });\n\n    \$.parser.parse(\"#dialog_pembayaran_pkb\");\n\n    \$(\"#dialog_mekanik\").dialog({\n        width: 400,\n        height: 140,\n        modal: true,\n        closed: true,\n        title: \"Data Mekanik\",\n        buttons:[{\n            text:'Simpan',\n            iconCls: \"fam disk\",\n            handler:function(){\n                \$.ajax({\n                    url: \"";
echo yii\helpers\Url::to(array("kerjakan"));
echo "?id=\" + selectedPekerjaan.id + \"&mekanik_id=\" + \$(\"#mekanik_id\").combobox(\"getValue\"),\n                    dataType : \"json\",\n                    success: function (msg) {\n                        refreshButtons();\n                        \$(\"#list_pekerjaan\").datagrid('reload');\n                    },\n                    error: function(xhr, ajaxOptions, thrownError){\n                        dialog(xhr.responseJSON.message);\n                    }\n                });\n                \$(\"#dialog_mekanik\").dialog('close');\n            }\n        },{\n            text:'Batal',\n            iconCls: \"icon-cancel\",\n            handler:function(){\n                \$(\"#dialog_mekanik\").dialog('close');\n            }\n        }]\n    });\n\n    \$.parser.parse(\"#dialog_mekanik\");\n\n    \$(\"#dialog_edit_suku_cadang\").window({\n        width: 400,\n        height: 280,\n        modal: true,\n        closed: true,\n        title: \"Edit Suku Cadang\"\n    });\n\n    \$.parser.parse(\"#dialog_edit_suku_cadang\");\n\n    \$(\"#dialog_edit_jasa\").window({\n        width: 400,\n        height: 280,\n        modal: true,\n        closed: true,\n        title: \"Edit Jasa\"\n    });\n\n    \$.parser.parse(\"#dialog_edit_jasa\");\n\n    \$(\"#dialog_search_konsumen\").window({\n        width: 800,\n        height: 380,\n        modal: true,\n        closed: true,\n        title: \"Data Konsumen (Klik 2x untuk memilih)\"\n    });\n\n    \$.parser.parse(\"#dialog_search_konsumen\");\n\n    \$(\"#dialog_search_jasa\").window({\n        width: 800,\n        height: 380,\n        modal: true,\n        closed: true,\n        title: \"Data Jasa (Klik 2x untuk memilih)\"\n    });\n\n    \$.parser.parse(\"#dialog_search_jasa\");\n\n    \$(\"#dialog_search_suku_cadang\").window({\n        width: 800,\n        height: 380,\n        modal: true,\n        closed: true,\n        title: \"Data Suku Cadang (Klik 2x untuk memilih)\"\n    });\n\n    \$.parser.parse(\"#dialog_search_suku_cadang\");\n\n    \$(\"#dialog_jenis_cetak\").dialog({\n        width: 400,\n        height: 140,\n        modal: true,\n        closed: true,\n        title: \"Pilihan Cetak\",\n        buttons:[{\n            text:'Cetak',\n            iconCls: \"fam printer\",\n            handler:function(){\n                if(\$(\"#jenis_cetak\").combobox(\"getValue\") == \"satu\") {\n                    var url = \"";
echo yii\helpers\Url::to(array("cetak-nota"));
echo "?id=\" + selectedPekerjaan.id;\n                    window.open(url, \"Cetak Perintah Kerja\", \"width=800,height=600\");\n                }else{\n                    var url = \"";
echo yii\helpers\Url::to(array("cetak-nota-jasa"));
echo "?id=\" + selectedPekerjaan.id;\n                    window.open(url, \"Nota Jasa\", \"width=800,height=600\");\n\n                    var url2 = \"";
echo yii\helpers\Url::to(array("cetak-nota-sukucadang"));
echo "?id=\" + selectedPekerjaan.id;\n                    window.open(url2, \"Nota Suku Cadang\", \"width=800,height=600\");\n                }\n\n                setTimeout(function(){\n                    \$(\"#list_pekerjaan\").datagrid('reload');\n                }, 2000);\n\n                //\$(\"#dialog_jenis_cetak\").dialog('close');\n            }\n        },{\n            text:'Batal',\n            iconCls: \"icon-cancel\",\n            handler:function(){\n                \$(\"#dialog_jenis_cetak\").dialog('close');\n            }\n        }]\n    });\n\n    \$.parser.parse(\"#dialog_jenis_cetak\");\n\n\n</script>\n\n<!-- # Region Top # -->\n<script>\n\n</script>\n\n<!-- # Region Button Bottom # -->\n<script>\n    //Simpan\n    \$(\"#btn_add\").linkbutton({\n        onClick: function () {\n            \$(\"#btn_save\").linkbutton('enable');\n\n            \$(\"#nomor\").textbox(\"setValue\", \"\");\n            \$(\"#waktu_daftar\").datebox(\"setValue\", \"";
echo date("Y-m-d");
echo "\");\n            \$(\"#konsumen_id\").combobox(\"setValue\", \"\");\n            \$(\"#no_antrian\").textbox(\"enable\").textbox(\"setValue\", \"\");\n            \$(\"#perintah_kerja_alasan_id\").combobox('enable').combobox(\"select\", \"1\");\n            \$(\"#konsumen_motor_id\").combobox('enable').combobox(\"select\", \"1\");\n            \$(\"#btn_search_konsumen\").linkbutton(\"enable\");\n            \$(\"#kondisi_awal\").textbox(\"enable\").textbox(\"setValue\", \"\");\n            \$(\"#keluhan\").textbox(\"enable\").textbox(\"setValue\", \"\");\n            \$(\"#analisa\").textbox(\"enable\").textbox(\"setValue\", \"\");\n            \$(\"#km\").textbox(\"enable\").textbox(\"setValue\", \"\");\n            \$(\"#bbm\").combobox(\"enable\").combobox(\"setValue\", \"0\");\n            \$(\"#konfirmasi\").removeAttr(\"disabled\");\n            //\$(\"#dari_sms\").removeAttr(\"disabled\");\n            \$(\"#catatan\").textbox(\"enable\").textbox(\"setValue\", \"\");\n\n            showDataKonsumen(null);\n\n            selectedPekerjaan = null;\n\n            reloadAllDetail();\n        }\n    });\n\n    \$(\"#btn_save\").linkbutton({\n        onClick: function () {\n            \$(\"#btn_save\").linkbutton('disable');\n\n            setTimeout(function(){\n                \$(\"#btn_save\").linkbutton('enable');\n            }, 3000);\n\n            if(\$(\"#konsumen_motor_id\").combobox('getValue') == \"\"){\n                dialog(\"Motor tidak boleh kosong\");\n                return;\n            }\n\n            if(\$(\"#km\").textbox('getValue') == \"\"){\n                dialog(\"KM Service tidak boleh kosong\");\n                return;\n            }\n\n            \$.ajax({\n                url: \"";
echo yii\helpers\Url::to(array("save-pekerjaan"));
echo "\" + (selectedPekerjaan == null ? \"\" : \"?id=\" + selectedPekerjaan.id),\n                data: {\n                    //waktu_daftar : \$(\"#waktu_daftar\").val(),\n                    no_antrian: \$(\"#no_antrian\").textbox('getValue'),\n                    perintah_kerja_alasan_id: \$(\"#perintah_kerja_alasan_id\").combobox('getValue'),\n                    motor_id: \$(\"#konsumen_motor_id\").combobox('getValue'),\n                    konsumen_id: \$(\"#konsumen_id\").combobox('getValue'),\n                    kondisi_awal: \$(\"#kondisi_awal\").textbox('getValue'),\n                    keluhan: \$(\"#keluhan\").textbox('getValue'),\n                    analisa: \$(\"#analisa\").textbox('getValue'),\n                    km: \$(\"#km\").textbox('getValue'),\n                    bbm: \$(\"#bbm\").combobox('getValue'),\n                    konfirmasi: \$(\"#konfirmasi\").is(\":checked\") ? \"1\" : \"0\",\n                    //dari_sms: \$(\"#dari_sms\").is(\":checked\") ? \"1\" : \"0\",\n                    catatan: \$(\"#catatan\").textbox('getValue'),\n                    konsumen_no_telepon: \$(\"#konsumen_no_telepon\").textbox('getValue')\n                },\n                type: \"post\",\n                dataType: \"json\",\n                success: function (msg) {\n                    if (msg.status == 200) {\n                        \$(\"#list_pekerjaan\").datagrid('reload');\n\n                        selectedPekerjaan = msg.model;\n                        selectPekerjaan();\n                        refreshButtons();\n                        reloadAllDetail();\n\n                        showDataKonsumen(selectedPekerjaan.konsumen_id);\n                    } else {\n                        dialog(msg.message);\n                    }\n\n                    \$(\"#btn_save\").linkbutton('enable');\n                },\n                error: function(xhr, ajaxOptions, thrownError){\n                    dialog(xhr.responseJSON.message);\n                }\n            });\n            return false;\n        }\n    });\n\n    \$(\"#btn_delete_item\").linkbutton({\n        onClick: function () {\n            \$.ajax({\n                url: \"";
echo yii\helpers\Url::to(array("delete-pekerjaan"));
echo "?id=\" + selectedPekerjaan.id,\n                dataType: \"json\",\n                success: function (msg) {\n                    if (msg.status == 200) {\n                        selectedPekerjaan = null;\n                        dialog(\"Pekerjaan Berhasil dihapus\");\n                        reloadAllDetail();\n                    }\n                },\n                error: function(xhr, ajaxOptions, thrownError){\n                    dialog(xhr.responseJSON.message);\n                }\n            });\n        }\n    });\n\n    \$(\"#btn_cetak_perintah\").linkbutton({\n        onClick: function () {\n            if(selectedPekerjaan == null){\n                dialog(\"Mohon pilih No PKB terlebih dahulu.\");\n                return;\n            }\n            var url = \"";
echo yii\helpers\Url::to(array("cetak-pkb"));
echo "?id=\" + selectedPekerjaan.id;\n            window.open(url, \"Cetak Perintah Kerja\", \"width=800,height=600\");\n        }\n    });\n\n    \$(\"#btn_kerjakan\").linkbutton({\n        onClick: function () {\n            if(selectedPekerjaan == null){\n                dialog(\"Mohon pilih No PKB terlebih dahulu.\");\n                return;\n            }\n            \$(\"#dialog_mekanik\").dialog('open');\n            \$('#mekanik_id').combobox('reload', \"";
echo yii\helpers\Url::to(array("user-available"));
echo "\");\n        }\n    });\n\n    \$(\"#btn_tunda\").linkbutton({\n        onClick: function () {\n            if(selectedPekerjaan == null){\n                dialog(\"Mohon pilih No PKB terlebih dahulu.\");\n                return;\n            }\n            \$.ajax({\n                url: \"";
echo yii\helpers\Url::to(array("tunda"));
echo "?id=\" + selectedPekerjaan.id,\n                dataType : \"json\",\n                success: function (msg) {\n                    refreshButtons();\n                    \$(\"#list_pekerjaan\").datagrid('reload');\n                },\n                error: function(xhr, ajaxOptions, thrownError){\n                    dialog(xhr.responseJSON.message);\n                }\n            });\n        }\n    });\n\n    \$(\"#btn_lanjut\").linkbutton({\n        onClick: function () {\n            if(selectedPekerjaan == null){\n                dialog(\"Mohon pilih No PKB terlebih dahulu.\");\n                return;\n            }\n            \$.ajax({\n                url: \"";
echo yii\helpers\Url::to(array("resume"));
echo "?id=\" + selectedPekerjaan.id,\n                dataType : \"json\",\n                success: function (msg) {\n                    refreshButtons();\n                    \$(\"#list_pekerjaan\").datagrid('reload');\n                },\n                error: function(xhr, ajaxOptions, thrownError){\n                    dialog(xhr.responseJSON.message);\n                }\n            });\n        }\n    });\n\n    \$(\"#btn_selesai\").linkbutton({\n        onClick: function () {\n            if(selectedPekerjaan == null){\n                dialog(\"Mohon pilih No PKB terlebih dahulu.\");\n                return;\n            }\n            \$.ajax({\n                url: \"";
echo yii\helpers\Url::to(array("selesai"));
echo "?id=\" + selectedPekerjaan.id,\n                dataType : \"json\",\n                success: function (msg) {\n                    refreshButtons();\n                    \$(\"#list_pekerjaan\").datagrid('reload');\n                },\n                error: function(xhr, ajaxOptions, thrownError){\n                    dialog(xhr.responseJSON.message);\n                }\n            });\n        }\n    });\n\n    \$(\"#btn_pembayaran\").linkbutton({\n        onClick: function () {\n            \$(\"#btn_dialog_bayar\").linkbutton('disable');\n            \$(\"#btn_pembayaran\").linkbutton('disable');\n            \$('#dialog_pembayaran_pkb').window('open');\n\n            \$.ajax({\n                url : \"";
echo yii\helpers\Url::to(array("pre-pembayaran"));
echo "?id=\" + selectedPekerjaan.id,\n                dataType: \"json\",\n                success: function(data){\n                    selectedPekerjaan = data.perintah_kerja;\n                    //isi konten\n                    \$(\"#dialog_no_pkb\").textbox('setValue', data.perintah_kerja.nomor);\n                    \$(\"#dialog_no_nsc\").textbox('setValue', data.nota_suku_cadang.no_nsc);\n                    \$(\"#dialog_no_njb\").textbox('setValue', data.nota_jasa.nomor);\n\n                    \$(\"#dialog_total\").numberbox('setValue', data.perintah_kerja.total);\n                    \$(\"#dialog_tunai\").numberbox('setValue', 0);\n                    \$(\"#dialog_debit\").numberbox('setValue', 0);\n\n                    \$(\"#btn_dialog_bayar\").linkbutton('enable');\n                }\n            });\n\n            return false;\n        }\n    });\n\n    \$(\"#btn_cetak_nota\").linkbutton({\n        onClick: function () {\n            if(selectedPekerjaan == null){\n                dialog(\"Mohon pilih No PKB terlebih dahulu.\");\n                return;\n            }\n\n            \$(\"#dialog_jenis_cetak\").dialog('open');\n        }\n    });\n</script>\n\n";

?>